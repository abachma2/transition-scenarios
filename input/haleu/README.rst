Transition to HALEU reactors
----------------------------

This directory contains the input files and analysis of multiple 
transition scenarios to advanced reactors fueled by High Assay 
Low Enriched Uranium (HALEU). 

Inputs:
===========
This directory holds all of the input files for this project.

The input files in the repository are the ``.xml`` input files for 
|Cyclus|. The input files are titled by scenario number, with 
the scenarios defined in the table below. 
Each of the input files read in other ``.xml`` files from the 
``inputs/united_states/`` directory. Because of the modularity of 
the inut files, **|Cyclus| must be called from the ``input/haleu/`` 
directory.** The modular input files include the 
light water reactors (LWR) currently deployed in the US, the recipes 
for LWR fuel cycle, and the deployment times for the LWRs. The LWR 
files and the ``inputs/united_states_2020.xml`` |Cyclus| input files 
are generated by running 
``/transition-scenarios/scripts/create_input.py``. The 
``input/united_states_2020.xml`` was then altered to create the other
scenarios in the directory by adding in necessary input parameters. 

=============== ============= ==================== ============== ===================== =========================
 Scenario #     Fuel cycle    Advanced reactors    Energy demand    Notes               File name (.xml)
=============== ============= ==================== ============== ===================== =========================
 1              once-through  None                 N/A                                  united_states_2020
 2              once-through  MMR                  No growth                            mmr_nogrowth
 3              once-through  Xe-100               No growth                            xe100_nogrowth
 4              once-through  Xe-100, MMR          No growth                            xe100_mmr_nogrowth
 5              once-through  MMR, VOYGR           No growth                            mmr_voygr_nogrowth
 6              once-through  Xe-100, VOYGR        No growth                            xe100_voygr_nogrowth
 7              once-through  Xe-100, MMR, VOYGR   No growth                            xe100_mmr_voygr_nogrowth
 8              once-through  MMR                  1%                                   mmr_1percent
 9              once-through  Xe-100               1%                                   xe100_1percent
 10             once-through  Xe-100, MMR          1%                                   xe100_mmr_1percent
 11             once-through  MMR, VOYGR           1%                                   mmr_voygr_1percent
 12             once-through  Xe-100, VOYGR        1%                                   xe100_voygr_1percent
 13             once-through  Xe-100, MMR, VOYGR   1%                                   xe100_mmr_voygr_1percent
 14             closed        Xe-100, MMR, VOYGR   No growth                            limited_TRISO_nogrowth
 15             closed        Xe-100, MMR, VOYGR   No growth      TRISO not reprocessed limited_noTRISO_nogrowth
 16             closed        SFR                  No growth                            continuous_nogrowth
 17             closed        Xe-100, MMR, VOYGR   1%                                   limited_TRISO_1percent
 18             closed        Xe-100, MMR, VOYGR   1%             TRISO not reprocessed limited_noTRISO_1percent
 19             closed        SFR                  1%                                   continuous_1percent
=============== ============= ==================== ============== ===================== =========================

Definitions for each advanced reactor and their corresponding recipes
are in ``inputs/united_states/reactors/`` and ``inputs/united_states/recipes``, 
respectively. Each of the necessary files are read into the ``.xml`` files 
in ``inputs/`` when |Cyclus| is run.

The location of the output files is assumed to be in ``input/haleu/outputs``, 
which is not version controlled in this repor because the file can be 
recreated by running the |Cyclus| input files. This assumed location 
holds true for running ``input/haleu/run_multiple_cyclus inputs.sh`` 
and the analysis scripts. However, this location can be updated and changed 
as desired. 

Analysis:
=========
The analysis directory contains a jupyter notebook (``analysis/initial_analysis.ipynb``)
to calculate and compare resource requirements of each fuel cycle 
scenario simulated. All of the figures created in the jupyter notebook
are saved in the ``figures/`` directory. 

This directory also contains ``df_to_csv.py`` to record all of the transactions
in the simulation as a ``.csv`` file. The transactions are determined 
based on the function ``transition_metrics.add_receiver_prototype``, which 
gets the transactions from the database and adds a column to record the 
prototype that receives the commodity in that transaction. The script contains 
functions to perform this function by either looping over multiple databases 
(``get_transactions_multiple_outputs``) or for only a single output file 
(``get_transactions_single_output``). This script is needed because the output 
files are relatively large and memory issues are encountered when the 
``transition_metrics.add_receiver_prototype`` function is called inside the 
jupyter notebook. 

Optimization:
=============
This directory contains the files for using a |Cyclus|-Dakota 
coupling to optimize Scenario 7 defined in the table above. There 
are three optimization problems: minimizing HALEU SWU, minimizing 
SNF mass, and minimizing both quantities together. Files in this 
directory include the Dakota input files, the |Cyclus| input 
file template, and driver files for each problem. Additionally, 
there are subdirectories for tuning the  
single-objective and multi-objective problem hyperparameters.

Order_testing:
=============
This directory contains files related to determining how the Cycamore 
ManagerInst decides which reactors to deploy based on the way they are 
ordered in the input file. 

Parametric-study:
=================
This directory contains information related to a parametric study on 
how the facility cap for the fuel fabrication or enrichment facilities for 
the transition to HALEU-fueled reactors. This was performed because of 
observed deficits from the energy demand when different enrichment and
fabrication facilities were used for LEU and HALEU. 

Sensitivity-analysis:
=====================
This directory contains files related to performing sensitivity analysis 
on Scenario 7 defined above. There are three subdirectories, one for different 
numbers of parameters varied at a time. In the ``oat`` directory only 
one parameter is varied at a time, in the ``synergistic`` directory two 
parameters are varied at a time, and in the ``global`` directory five different 
parameters are varied at a time. Each of these three subdirectories contain 
smaller subdirectories based on the parameters varied. 
